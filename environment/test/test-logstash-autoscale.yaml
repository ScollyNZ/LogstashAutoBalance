---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: basic-kafka
spec:
  replicas: 2
  template:
   spec:
    containers:
    - name: kafka 
      image: bitnami/kafka:latest
      env:
      - name: KAFKA_ZOOKEEPER_CONNECT
        value: "localhost:2181"
      - name: ALLOW_PLAINTEXT_LISTENER
        value: "yes"
      resources:
        limits:
          memory: "128Mi"
          cpu: "500m"
    - name: zookeeper
      image: bitnami/zookeeper:latest
      ports:
      - containerPort: 2181
      env:
      - name: ALLOW_ANONYMOUS_LOGIN
        value: "yes"
      resources:
        limits:
          memory: "128Mi"
          cpu: "500m"
    - name: kafka-manager
      image: hlebalbau/kafka-manager:latest
      ports:
      - containerPort: 9000
      env:
        - name: ZK_HOSTS
          value: "localhost:2181"
        - name: APPLICATION_SECRET
          value: "letmein"
      resources:
        limits:
          memory: "128Mi"
          cpu: "500m"

